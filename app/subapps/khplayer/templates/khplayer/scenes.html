{% set title = "Scene List" %}
{% extends "khplayer/base.html" %}

{% block head_add %}
<link rel="stylesheet" text="text/css" href="{{ url_for('.static', filename='scenes.css')}}">
{% endblock %}

{% block main %}
<form action="submit" method="POST">

<section>
<ul class="scenes">
{% for scene in scenes %}
<li>
	<input type="checkbox" name="del" value="{{scene['sceneName']}}">
	<button type="submit" name="scene" value="{{scene['sceneName']}}">{{scene['sceneName']}}</button>
	</li>
{% endfor %}
</ul>
<p>
	<button type="button" id="select-all">Select All</button>
	<button type="button" id="deselect-all">Deselect All</button>
	<button type="submit" name="action" value="delete">Delete Selected</button>
</p>
</section>

</form>

<script>
function $(id)
    {
    return document.querySelector(id);
    }

function select_all(name, state)
	{
	document.getElementsByName(name).forEach(checkbox => {
		checkbox.checked = state;
		});
	}

document.getElementById("select-all").addEventListener("click", event => { select("del",true); });
document.getElementById("deselect-all").addEventListener("click", event => { select("del",false); });

let dropArea = $('.scenes');

/* Allow drop */
dropArea.addEventListener("dragover", (e) => e.preventDefault());

/* Visual feedback when over drop zone */
let counter = 0;
dropArea.addEventListener("dragenter", (e) => {
	console.log("enter:", e.target);
	counter++;
	if(counter == 1)
		dropArea.classList.add('highlight');
	e.preventDefault();
	});
dropArea.addEventListener("dragleave", (e) => {
	console.log("exit:", e.target);
	counter--;
	if(counter == 0)
		dropArea.classList.remove('highlight');
	e.preventDefault();
	});

/* File actually dropped onto the drop zone */
dropArea.addEventListener('drop', (e) => {
	if(e.dataTransfer.files.length > 1)
		alert("You can only upload one file at a time.");
	console.log(e.dataTransfer);
	e.stopPropagation();
});



</script>
{% endblock %}
