{% set title = gettext("Videos: {category} â€” {subcategory}").format(category=subcategory.category_name, subcategory=subcategory.subcategory_name) %}
{% extends "khplayer/base.html" %}

{% block header %}
	<h1>
		<a href="../..">
		<div style="float: left; font-size: 200%; margin-right: 10px;">&lt;</div>
		{{ subcategory.category_name }}
		<br>
		{{ subcategory.subcategory_name }}
		</a>
	</h1>
{% endblock %}

{% block main %}
<section>

<form action="download" method="POST">
<table class="borders full-width selection">
<thead>
<tr>
	<th></th>
	<th></th>
	<th>{{gettext("Video Title")}}</th>
</tr>
</thead>
<tbody>
{% for video in subcategory.videos | sort(attribute="date", reverse=True) %}
	<tr>
		<td>
			<button class="add" type="submit" name="lank" value="{{video.lank|urlencode}}">+</button>
		</td>
		<td>
			<div class="thumbnail"><img src="{{video.thumbnail}}"></td>
		</td>
		<td>
			<a href="{{video.href}}" target="_blank">{{video.name}}</a>
		</td>
	</tr>
{% endfor %}
</tbody>
</table>
<input id="title" type="hidden" name="title">
</form>

<script>
function button_click(event) {
	document.getElementById("title").value = event.target.textContent;
	}
let buttons = document.getElementsByTagName("button");
for(let i=0; i < buttons.length; i++) {
	buttons[i].addEventListener("click", button_click);
	}
</script>

<form action="update" method="POST">
<p><button type="submit" name="update" value="1">{{gettext("Update Category")}}</button></p>
</form>

</section>
{% endblock %}
